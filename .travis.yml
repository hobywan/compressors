dist: xenial
os:
  - linux
  - osx

language: cpp
compiler: gcc

matrix:
  exclude:
    - compiler: gcc
      os: osx

addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - cmake
    - g++-9
    - openssl
    - zlib1g-dev
    - libgsl-dev
    - libfftw3-dev

  homebrew:
    packages:
    - cmake
    - g++-9
    - zlib
    - openssl
    - gsl
    - fftw

before_script:
  - export CC=gcc-9 CXX=g++-9

script:
  - |
    compressors=("blosc" "fpzip" "isabela" "sz" "zfp");
    for current in "${compressors[@]}"; do
      cd ${current} && mkdir build && cd build;
      cmake -DCMAKE_INSTALL_PREFIX=../install ..;
      make -j && make install && cd ../..;
    done
